# See: https://taskfile.dev/api/

version: "3"

tasks:
  generate:
    aliases:
      - g
    desc: "Generate code from proto files"
    cmds:
      - mkdir -p internal/generated
      - protoc -I api api/proto/**/*.proto --go_out=./internal/generated/ --go_opt=paths=source_relative --go-grpc_out=./internal/generated/ --go-grpc_opt=paths=source_relative

  build:
    aliases:
      - b
    desc: "Builds the application via Docker"
    cmds:
      - docker-compose -f deployments/docker-compose.yaml --env-file=".env" up -d

  rebuild:
    aliases:
      - rb
    desc: "Rebuilds the application via Docker"
    cmds:
      - docker-compose -f deployments/docker-compose.yaml --env-file=".env" up -d --build
